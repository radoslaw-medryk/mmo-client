(()=>{"use strict";var t={344:(t,n,e)=>{e.r(n)},187:(t,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.randomColor=void 0;var o=e(233);n.randomColor=function(){var t=o.randomNumber(0,256),n=o.randomNumber(0,256),e=o.randomNumber(0,256);return"#"+t.toString(16).padStart(2,"0")+n.toString(16).padStart(2,"0")+e.toString(16).padStart(2,"0")}},233:(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.randomNumber=void 0,n.randomNumber=function(t,n){return Math.floor(Math.random()*(n-t))+t}},201:(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.sure=void 0,n.sure=function(t){if(null==t)throw new Error("value === null || value === undefined");return t}},474:function(t,n,e){var o,r=this&&this.__extends||(o=function(t,n){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)});Object.defineProperty(n,"__esModule",{value:!0}),n.Canvas=void 0;var i=e(201),u=function(t){function n(n){var e=t.call(this)||this;e.visualConsts=n,e.canvas=document.createElement("canvas");var o=n.tileSize,r=n.chunkSize,u=o.pxWidth*r.tilesWidth,s=o.pxHeight*r.tilesHeight;return e.canvas.width=u,e.canvas.height=s,e.context=i.sure(e.canvas.getContext("2d")),e}return r(n,t),n.prototype.mount=function(n){t.prototype.mount.call(this,n,this.canvas)},n.prototype.unmount=function(){t.prototype.unmount.call(this,this.canvas)},n.prototype.fillTile=function(t,n,e){var o=this.visualConsts.tileSize,r=o.pxWidth*t,i=o.pxHeight*n;this.context.fillStyle=e,this.context.fillRect(r,i,o.pxWidth,o.pxHeight)},n}(e(923).Mountable);n.Canvas=u},37:function(t,n,e){var o,r=this&&this.__extends||(o=function(t,n){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)});Object.defineProperty(n,"__esModule",{value:!0}),n.Chunk=void 0;var i=e(474),u=function(t){function n(n,e){var o=t.call(this)||this;return o.visualConsts=n,o.chunkSettings=e,o.container=document.createElement("div"),o.canvas=new i.Canvas(n),o.canvas.mount(o.container),o}return r(n,t),n.prototype.mount=function(n){t.prototype.mount.call(this,n,this.container)},n.prototype.unmount=function(){t.prototype.unmount.call(this,this.container)},n.prototype.fillTile=function(t,n,e){this.canvas.fillTile(t,n,e)},n}(e(923).Mountable);n.Chunk=u},200:function(t,n,e){var o,r=this&&this.__extends||(o=function(t,n){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)});Object.defineProperty(n,"__esModule",{value:!0}),n.Layer=void 0;var i=e(187),u=e(37),s=e(923),a=e(238),c=e(352),l=function(t){function n(n){var e=t.call(this)||this;return e.chunks=[],e.visualConsts=n,e.layerState={center:{gamePxX:0,gamePxY:0}},e.container=document.createElement("div"),e}return r(n,t),n.prototype.mount=function(n){t.prototype.mount.call(this,n,this.container)},n.prototype.unmount=function(){t.prototype.unmount.call(this,this.container)},n.prototype.syncChunks=function(){var t=c.getViewPortGamePxCoords(this.visualConsts,this.layerState),n=a.getChunkPosition(this.visualConsts,t.topLeft),e=a.getChunkPosition(this.visualConsts,t.bottomRight);this.removeChunksOutside(n,e),this.createMissingChunksInside(n,e)},n.prototype.__paintChunksRandomly=function(){for(var t=0,n=this.chunks;t<n.length;t++)for(var e=n[t],o=0;o<6;o++)for(var r=0;r<6;r++)e.fillTile(o,r,i.randomColor())},n.prototype.removeChunksOutside=function(t,n){for(var e=this.chunks.length-1;e>=0;e--){var o=this.chunks[e],r=o.chunkSettings.position.chunksX,i=o.chunkSettings.position.chunksY;(r<t.chunksX||r>n.chunksX||i<t.chunksY||i>n.chunksY)&&(console.log(">>> REMOVING CHUNK ["+r+", "+i+"]"),this.chunks.splice(e,1))}},n.prototype.createMissingChunksInside=function(t,n){for(var e=function(e){for(var r=function(t){if(o.chunks.some((function(n){return n.chunkSettings.position.chunksX===e&&n.chunkSettings.position.chunksY===t})))return"continue";console.log(">>> CREATING CHUNK ["+e+", "+t+"]");var n=new u.Chunk(o.visualConsts,{position:{chunksX:e,chunksY:t}});n.mount(o.container),o.chunks.push(n)},i=t.chunksY;i<n.chunksY;i++)r(i)},o=this,r=t.chunksX;r<n.chunksX;r++)e(r)},n}(s.Mountable);n.Layer=l},238:(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getChunkPosition=void 0,n.getChunkPosition=function(t,n){var e=t.chunkSize,o=t.tileSize,r=e.tilesWidth*o.pxWidth,i=e.tilesHeight*o.pxHeight,u=n.gamePxX,s=n.gamePxY;return{chunksX:Math.floor(u/r),chunksY:Math.floor(s/i)}}},352:(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getViewPortGamePxCoords=void 0,n.getViewPortGamePxCoords=function(t,n){var e=n.center,o=t.viewPortSize,r=t.tileSize,i=o.tilesWidth*r.pxWidth,u=o.tilesHeight*r.pxHeight,s={gamePxX:Math.floor(e.gamePxX-i/2),gamePxY:Math.floor(e.gamePxY-u/2)};return{topLeft:s,bottomRight:{gamePxX:s.gamePxX+i,gamePxY:s.gamePxY+u}}}},923:(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Mountable=void 0;var e=function(){function t(){}return t.prototype.mount=function(t,n){if(this.parent)throw new Error("Already mounted");t.appendChild(n),this.parent=t,this.current=n},t.prototype.unmount=function(t){this.parent&&this.current&&(this.parent.removeChild(t),this.parent=void 0,this.current=void 0)},t}();n.Mountable=e}},n={};function e(o){var r=n[o];if(void 0!==r)return r.exports;var i=n[o]={exports:{}};return t[o].call(i.exports,i,i.exports,e),i.exports}e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{e(344);var t=e(200),n=document.createElement("div");document.body.appendChild(n);var o=new t.Layer({tileSize:{pxWidth:128,pxHeight:128},viewPortSize:{tilesWidth:6,tilesHeight:6},chunkSize:{tilesWidth:6,tilesHeight:6}});o.mount(n),o.syncChunks(),o.__paintChunksRandomly(),console.log("Hello world")})()})();
//# sourceMappingURL=index.js.map